<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>週記（二十九）</title>
    <meta name="description" content="渾渾噩噩的一週">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>

    <!-- and it's easy to individually load additional languages -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/go.min.js"></script>

    <script>hljs.highlightAll();</script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <script>
        MathJax = {
            loader: {load: ['[tex]/mathtools']},
            tex: {packages: {'[+]': ['mathtools']}}
        };
    </script>
    <script>
        MathJax = {
            loader: {load: ['[tex]/textmacros']},
            tex: {packages: {'[+]': ['textmacros']}}
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <script src="../js/main.js" defer></script>
    
</head>
<button id="back-to-top" class="fab fab-scroll" aria-label="back-to-top">
    <span class="material-icons">arrow_upward</span>
</button>
<body>
    <header>
        <div class="navbar">
            <a href="../index.html" class="nav-brand">小學生筆記</a>
            <button class="hamburger-menu" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-links">
                <a href="../weekly.html" class="active">週記</a>
                <a href="../about.html" class="">關於</a>
            </div>
        </div>
    </header>

    <main>
        <h1>週記（二十九）</h1>
        <p class="post-date">2025-08-09</p>

                <div class="toc">
            <h2>Table of Contents</h2>
            <ul>
            <li><a href="#大學最喜歡的幾門課"
            id="toc-大學最喜歡的幾門課">大學最喜歡的幾門課</a>
            <ul>
            <li><a href="#中華民國憲法與政府"
            id="toc-中華民國憲法與政府">中華民國憲法與政府</a></li>
            <li><a href="#因果推論和勞動經濟學"
            id="toc-因果推論和勞動經濟學">因果推論和勞動經濟學</a></li>
            </ul></li>
            <li><a href="#double-did" id="toc-double-did">Double DiD</a>
            <ul>
            <li><a href="#設定" id="toc-設定">設定</a></li>
            <li><a href="#論點" id="toc-論點">論點</a></li>
            </ul></li>
            </ul>
        </div>
        
        <h2 id="大學最喜歡的幾門課">大學最喜歡的幾門課</h2>
        <p>我偶爾會捫心自問：大學時期到底算不算充實快樂？
        這個問題很難回答。 可能因為害怕答錯，
        或者單純不喜歡把話說得太滿、太絕對（開玩笑的時候除外），
        要是有人這樣問我，我八成是回答「還好」、「普通」。</p>
        <p>不過如果請我試舉大學時期修過最喜歡、最回味無窮的幾門課，
        我倒是可以列出來幾門（依修課順序排序）：</p>
        <ul>
        <li><p>政治系的必修課，陳淳文老師開的「中華民國憲法與政府」；</p></li>
        <li><p>數學系的選修課，黃彥棕老師開的「因果推論」；</p></li>
        <li><p>經濟系的選修課，KM 開的「勞動經濟學」。</p></li>
        </ul>
        <h3 id="中華民國憲法與政府">中華民國憲法與政府</h3>
        <p>這門課是政治系（也就是我大一的主修）的大一必修課。
        整體而言課程內容應該不至於跟法律系差很多，
        不過政治系把這門課拆成兩學期，
        其中陳淳文老師的這班（預設是公行組的學生）上學期教政府體制，
        下學期教人權。</p>
        <p>陳淳文老師是巴黎第二大學的法學博士，
        專長是公法、法國公法和歐盟法， 同時也是中研院法律所的研究員。
        他當然可以擔當教授憲法的重任。
        這門課的教科書是他和吳庚（已故的前大法官）合著的《憲法理論與政府體制》。</p>
        <p>撇除專業背景以外， 這門課的魅力在於陳老師的教學風格。
        一般來說我不太喜歡翻轉教室，
        因為這常常是老師偷懶、只想靠著多年前預錄的影片的藉口。
        但是陳老師的翻轉教室確實經營得不錯。
        我們每週要在家看一集陳老師在臺大開放式課程上的影片，
        這是多年前的正課錄影。 課前他會在教師休息室看報紙，
        大概是思考本週的時事如何與課程內容結合。
        而課堂上他會開始談本週的時事（經常比較爭議🤣），
        連結課程的內容， 並且拋出一些各種與當週課程知識相關的問題，
        有時候則是提出一個論點（可能是他自己的觀點，也可能是一個他不認同的人的看法），
        邀請學生提出對這個論點的看法。</p>
        <p>老師很大方，似乎回答一個問題就能加學期成績一分。
        我自己經驗中， 其他有「回答問題—加分」制度的課程，
        常常搞得學生壓力很大，
        都在問一些很無聊、瑣碎的問題（例如投影片上白紙黑字寫著的內容還要問），
        而整個課程的節奏就常常被這些奇怪的問題打斷。
        但是不知為何陳老師蠻能掌控課程節奏。 他很歡迎學生問問題，
        不吝於說鼓勵學生發表意見的話，
        但也會大方地引用法律上的觀點和學生辯論（很少有人能辯贏他）。
        許多人認為陳淳文立場偏藍， 我聽過一個學姊說自己不喜歡陳的課，
        因為他自稱很不認同陳的政治立場， 但又說陳講起來就很有道理，
        很難反駁。 我想這也側面佐證這門課其中一個有趣的地方：
        很多覺青很想在課堂上跟陳老師辯論，<a href="#fn1"
        class="footnote-ref" id="fnref1"
        role="doc-noteref"><sup>1</sup></a> 可是陳老師辯才無礙，
        總能以一擋十， 又能維持有水準的討論，
        完全不是網路上那些低素質的互嗆可以比擬的。</p>
        <p>題外話， 陳老師另一個有趣的地方是還蠻真性情的。
        他竟然可以在課堂上大方說出「綠色恐怖」和「NCC，髒兮兮」這類的詞彙
        （當然這些詞彙的使用有其課堂的脈絡， 可能是討論一段時事之後，
        他所下的註腳之類的）。 而且聽說， 他的導生聚也蠻有意思。
        政治系給的導生費很少， 很多老師就請學生吃個披薩之類的就打發掉，
        但他會邀請大家一起坐下來吃個豐盛的健康餐盒，
        然後跟大家認真談談大學生活和未來規劃， 應該算是蠻用心的吧！</p>
        <h3 id="因果推論和勞動經濟學">因果推論和勞動經濟學</h3>
        <div class="comment">
        <p>我喜歡因果推論和勞動經濟學這兩門課的原因有點類似，
        並不是老師真的很會教（？），
        而是這兩門課對我來說像是開啟一扇新世界的大門。
        這兩門課算是我第一次真正接觸到因果推論，
        很多現在我思考問題的方式，
        都源於這兩門課上看到的一些課程材料。</p>
        </div>
        <p>因果推論是我大三上修的數學系選修課，
        授課老師是數學系的兼任教授黃彥棕。 老師的求學背景很有趣。
        他從臺大醫學系畢業以後， 沒有選擇從醫，
        最後在哈佛大學取得流行病學和生物統計學的雙博士。
        他博班的老闆是林希虹， 這人非常大咖， 2006 年的時候得過 COPSS
        會長獎（統計學領域的大獎，只頒給 40 歲以下的學者）。</p>
        <p>這門課的教科書是 <a
        href="https://miguelhernan.org/whatifbook">Causal Inference:
        What If</a>。 這本書是 Miguel Hernán 和 James Robins
        兩位哈佛流行病學和生物統計的教授合著的。<a href="#fn2"
        class="footnote-ref" id="fnref2"
        role="doc-noteref"><sup>2</sup></a> 流行病學家同時擁抱 Donald
        Rubin 的潛在結果模型（potential outcomes model）和 Pearl
        對於因果圖發展的理論。
        因此，這門課的內容同時介紹兩套因果推論的框架。 這是好事，
        因為這兩套框架並不是互斥的， 而且各有所長。 當然 What If
        書畢竟是流行病學家寫的， 介紹的方法多半是流行病學領域更常用的，
        例如 g-formula、marginal structural model、g-estimation 等等，
        這些經濟學家應該幾乎完全沒有聽過。 除了書中的內容，
        老師也補充中介分析和工具變數的一些內容。 整體來說，
        很幸運從流行病學的角度入門因果推論。</p>
        <hr />
        <p>我大四修 KM 的勞動經濟學， 他當時剛回國，
        這是他在臺大開的第一門課。 沒有教科書。 雖然叫做勞動經濟學，
        但是當學期的內容更偏向介紹方法（例如因果推論或結構模型）。
        我一直沒有真正搞懂後半學期的動態規劃（雖然都修過總體理論了😅），
        不過光是前半學期介紹的東西， 我就覺得收穫蠻多。 例如 generalized
        Roy model、MTE framework、 或者 event study 迴歸的 negative
        weights 問題。</p>
        <h2 id="double-did">Double DiD</h2>
        <p>蔡老師除了可以說是一個高產的 applied microeconomist，
        他也有一篇 applied econometrics 的論文，<a
        href="https://arxiv.org/abs/2409.05184">Difference-in-Differences
        with Multiple Events</a>， 別稱是 “Double DiD”。</p>
        <p>在此紀錄前幾天稍微閱讀這篇文章所產生的想法，
        日後有空整理一下想法再與他討論。</p>
        <p>他主要想解決的問題是，
        如果我們有多個政策在不同地區不同時間點逐步實施，
        而我們應該如何適當地估計其中一個政策的效果。</p>
        <h3 id="設定">設定</h3>
        <p>為了簡單，我們假設有兩個政策。
        並且，雖然蔡老師的文章處理的是多期的狀況，
        但我決定只考慮兩期的情況，
        這樣就已經足夠說明我的疑惑和介紹這篇文章的其中兩個結果，
        而不失太多一般性。 具體而言， 我們觀察到一筆資料 <span
        class="math inline">\(\{Y_{i1}, Y_{i2}, D_i^1,
        D_i^2\}_{i=1}^N\)</span>， 從 <span class="math inline">\((Y_1,
        Y_2, D^1, D^2)\)</span> 的無窮大母體中抽出。<a href="#fn3"
        class="footnote-ref" id="fnref3"
        role="doc-noteref"><sup>3</sup></a> 其中 <span
        class="math inline">\(Y_1\)</span> 和 <span
        class="math inline">\(Y_2\)</span>
        分別是第一期和第二期的結果變數， <span
        class="math inline">\(D^1\)</span> 和 <span
        class="math inline">\(D^2\)</span> 是兩個政策的指標變數， 如果
        <span class="math inline">\(D^1 = 1\)</span> 表示政策一實施， 而
        <span class="math inline">\(D^1 = 0\)</span>
        表示政策一沒有實施， 同理對於 <span
        class="math inline">\(D^2\)</span>。
        兩個政策都在第一期與第二期之間實施， 也就是說對於所有樣本 <span
        class="math inline">\(i\)</span>， <span
        class="math inline">\(D_i^1 = 0\)</span> 且 <span
        class="math inline">\(D_i^2 = 0\)</span>。</p>
        <p>我們來定義潛在結果（potential outcomes）的符號。 令 <span
        class="math inline">\(Y_t(d^1, d^2)\)</span> 是第 <span
        class="math inline">\(t\)</span> 期時，
        當我們有一個假想的干預設定 <span class="math inline">\(D^1 =
        d^1\)</span> 和 <span class="math inline">\(D^2 = d^2\)</span>
        時的潛在結果。 令 <span class="math inline">\(Y_t(d^1)\)</span>
        是第 <span class="math inline">\(t\)</span> 期時，
        當我們有一個假想的干預設定 <span class="math inline">\(D^1 =
        d^1\)</span> 時的潛在結果。 我們假設</p>
        <ol type="1">
        <li><p>Consistency 假設成立：<span class="math inline">\(Y_t =
        Y_t(D^1, D^2)\)</span> 且 <span class="math inline">\(Y_t =
        Y_t(D^1)\)</span>；</p></li>
        <li><p>沒有預期效果（兩個政策都對第一期的結果沒有影響）；</p></li>
        <li><p>Composition 假設成立：<span
        class="math inline">\(Y_t(d^1) = Y_t(d^1,
        D^2(d^1))\)</span>。</p></li>
        </ol>
        <h3 id="論點">論點</h3>
        <p>這篇文章的第一個定理稱為 omitted event bias，
        它企圖刻劃如果我們沒有適當地考慮另一個政策，
        稱為干擾政策或干擾事件（confounding event）， 那麼標準的 DiD
        估計量（estimand）（例如 <a
        href="https://www.sciencedirect.com/science/article/abs/pii/S0304407620303948?via%3Dihub">Callaway
        and Sant’Anna (2021)</a>） <span class="math display">\[
        \tau_{\text{DiD}} = \operatorname{E}[Y_2 - Y_1 \mid D^1 = 1] -
        \operatorname{E}[Y_2 - Y_1 \mid D^1 = 0]
        \]</span> 會無法識別「第一個政策的效果」 <span
        class="math display">\[
        \tau^{1} = \operatorname{E}[Y_2(1, 0) - Y_1(0, 0) \mid D^1 = 1].
        \]</span> 這是第一個我覺得奇怪的地方。
        因為，第一個政策的效果，也就是 DiD 估計量想識別的東西， 應該是
        <span class="math display">\[
        \begin{align*}
        \tau^{1\prime} &amp;= \operatorname{E}[Y_2(1) - Y_1(0) \mid D^1
        = 1] \\
        &amp;= \operatorname{E}[Y_2(1, D^2(1)) - Y_1(0, D^2(0)) \mid D^1
        = 1].
        \end{align*}
        \]</span> 才對。</p>
        <p>給定標準的平行趨勢假設 <span class="math display">\[
        \begin{align*}
        &amp;\mathrel{\phantom{=}} \operatorname{E}[Y_2(0) - Y_1(0) \mid
        D^1 = 1] \\
        &amp;= \operatorname{E}[Y_2(0) - Y_1(0) \mid D^1 = 0],
        \end{align*}
        \]</span> 就算有另一個干擾事件， DiD 估計量仍然可以識別 <span
        class="math inline">\(\tau^{1\prime}\)</span>。
        也因此第二個奇怪的地方（也可能我看不仔細）是，
        在假設了同質的處理效果（homogeneous treatment effect）之後，
        文章證明了定理一。 但似乎沒有明確說明，
        到底定理一使用了什麼樣版本的平行趨勢假設？</p>
        <p>這篇文章發明了一個類似於以下的平行趨勢假設： 對於任意 <span
        class="math inline">\(d^1\)</span> 和 <span
        class="math inline">\(d^2\)</span>，我們有 <span
        id="eq:parallel-trends-assumption"><span class="math display">\[
        \begin{align*}
        &amp;\mathrel{\phantom{=}} \operatorname{E}[Y_2(0, 0) - Y_1(0,
        0) \mid D^1 = d^1, D^2 = d^2] \\
        &amp;= \operatorname{E}[Y_2(0, 0) - Y_1(0, 0) \mid D^1 = 0, D^2
        = 0],
        \end{align*}
        \qquad{(1)}\]</span></span> 想當然爾， 給定這個假設，
        我們可以識別 <span class="math display">\[
        \begin{align*}
        \delta^{1, 1 \mid 1, 1} &amp;= \operatorname{E}[Y_2(1, 1) -
        Y_1(0, 0) \mid D^1 = 1, D^2 = 1], \\
        \delta^{1, 0 \mid 1, 0} &amp;= \operatorname{E}[Y_2(1, 0) -
        Y_1(0, 0) \mid D^1 = 1, D^2 = 0], \\
        \delta^{0, 1 \mid 0, 1} &amp;= \operatorname{E}[Y_2(0, 1) -
        Y_1(0, 0) \mid D^1 = 0, D^2 = 1].
        \end{align*}
        \]</span> 相對地， 給定這個假設， 如果我們單純考慮 DiD 估計量，
        問它能不能識別 <span
        class="math inline">\(\tau^{1\prime}\)</span>，
        那我猜確實可以導出類似 omitted event bias 的結果，
        但這並不令人意外，
        因為標準的平行趨勢假設與本文所使用的平行趨勢假設幾乎是獨立的，
        沒有任何蘊含關係，沒有誰強誰弱。 打個比方， 這就像是我們拿著
        <span class="math inline">\(2 \times 2\)</span>
        因子實驗（factorial experiment）的資料，
        我們當然不可能透過比較某個因子的不同水平的樣本的平均值來識別該因子的邊際處理效果。
        因為本質上，因子實驗所執行的「聯合干預」（joint intervention）
        就產生與一個普通的 A/B test 的「單一干預」（single
        intervention）不同因果結構的資料。</p>
        <p>這篇文章要回答的另一個問題， 以婚育的例子，白話翻譯大概就是，
        假如我們有一組（cohort）樣本， 他們在 2010 年結婚，在 2015
        年生小孩， 那請問假如他們在 2010 年結婚但從未有小孩的話，
        結婚對他們影響如何？</p>
        <p>讓我們切換回兩期模型的問題。 在該文的平行趨勢假設 <a
        href="#eq:parallel-trends-assumption">Equation 1</a> 下，
        我們可以識別 <span class="math inline">\(\delta^{1, 1 \mid 1,
        1}\)</span>， 但我們無法識別 <span class="math display">\[
        \delta^{1, 0 \mid 1, 1} = \operatorname{E}[Y_2(1, 0) - Y_1(0, 0)
        \mid D^1 = 1, D^2 = 1].
        \]</span> 這是因為 <a
        href="#eq:parallel-trends-assumption">Equation 1</a> 假設了
        <span class="math inline">\((D^1, D^2) = (1, 1)\)</span>
        這群人， 如果沒有接受任何政策的反事實趨勢，
        但並沒有假設這群人如果接受政策一，而沒有接受政策二，
        會有什麼樣的反事實趨勢。</p>
        <p>換言之， 在很多應用（如婚育）中，
        我們可能在乎如果不是只接受政策一， 而是接受兩個政策，
        那會有怎樣的效果（這同樣是一個反事實問題）。 有人可能單純地覺得
        <span class="math inline">\(\delta^{1, 1}\)</span>
        既然衡量接受兩個政策的效果， 而 <span
        class="math inline">\(\delta^{1, 0 \mid 1, 0}\)</span>
        衡量接受政策一的效果， 那 <span class="math inline">\(\delta^{1,
        1 \mid 1, 1} - \delta^{1, 0 \mid 1, 0}\)</span>
        不就可以用來衡量剛剛提到的反事實問題嗎？
        事實不然，這兩個參數是兩群不同的人的處理效果： <span
        class="math display">\[
        \begin{align*}
        \delta^{1, 1 \mid 1, 1} - \delta^{1, 0 \mid 1, 0}
        &amp;= \delta^{1, 1 \mid 1, 1} - \delta^{1, 0 \mid 1, 1}
        + \delta^{1, 0 \mid 1, 1} - \delta^{1, 0 \mid 1, 0} \\
        &amp;= \operatorname{E}[Y_2(1, 1) - Y_1(1, 0) \mid D^1 = 1, D^2
        = 1]
        + \underbrace{\delta^{1, 0 \mid 1, 1} - \delta^{1, 0 \mid 1,
        0}}_{\text{選擇偏誤}}.
        \end{align*}
        \]</span> 其中，第一項是 <span class="math inline">\((D^1, D^2)
        = (1, 1)\)</span>
        這群人如果從接受兩個政策改為只接受政策一的處理效果，
        第二項則是「選擇偏誤」， 因為 <span class="math inline">\((D^1,
        D^2) = (1, 1)\)</span> 和 <span class="math inline">\((D^1, D^2)
        = (1, 0)\)</span> 本身就是兩群不同的人。</p>
        <p>數學上處理選擇偏誤最簡單的方式就是下更強的平行趨勢假設。
        這邊倒是有很多不同的做法， 如 <a
        href="https://arxiv.org/abs/2107.02637v3">Difference-in-Differences
        with a Continuous Treatment</a> 討論了一些。
        不過，我感覺都沒有很理想。 所謂更強的平行趨勢假設，
        它所對應到的因果模型， 很可能只能適用在很侷限的情況之下。</p>
        <p>以蔡老師的文章而言，因為處理的是多期的情況，
        而且不同的樣本可能在不同的時間點接受政策，
        所以文章對處理效果下了一個平行趨勢假設，
        並讓兩個政策對於結果的影響是可加的（additive），
        換言之直接排除掉政策的交互作用， 讓只有接受其中一個政策的效果，
        可以作為已經接受兩個政策的效果的對照組。
        在數學上這是一個很直觀的操作，
        但在應用上，特別是排除掉政策的交互作用， 是一個非常強的假設。
        設想婚育的例子， 結婚生子對於薪資的影響，
        會等於結婚但無子對於薪資的影響加上未婚生子的影響嗎？
        我很難想像這是一個合理的假設， 不過到底應該如何適當地處理，
        我也還沒有一個很好的想法。</p>
        <section id="footnotes"
        class="footnotes footnotes-end-of-document" role="doc-endnotes">
        <hr />
        <ol>
        <li id="fn1"><p> 有點猶豫要不要使用「覺青」這個意義複雜的詞，
        畢竟雖然很多人說陳老師屬於保守派，
        但整體而言我覺得放在某種光譜之下， 他很難算成保守派吧。<a
        href="#fnref1" class="footnote-back"
        role="doc-backlink">↩︎</a></p></li>
        <li id="fn2"><p> 這兩人都非常有名。 其中 Robins
        可以說是流行病學領域做因果推論的先驅，
        他也很有趣，他原本也是一個醫師，
        只有在耶魯大學學過一點應用統計學， 並沒有博士學位， 自學成才，
        發明許多流行病學領域， 甚至是各個領域都流行的方法。 比如說他在
        80 年代發明了 G-formula，用來估計時變處理的處理效果的方法， 在
        90 年代其中一篇很重要的 JASA 文章，從 influence function 推出
        doubly robust estimator，都對因果推論有很大的貢獻。<a
        href="#fnref2" class="footnote-back"
        role="doc-backlink">↩︎</a></p></li>
        <li id="fn3"><p> 為了方便，有時候我會省略下標 <span
        class="math inline">\(i\)</span>。<a href="#fnref3"
        class="footnote-back" role="doc-backlink">↩︎</a></p></li>
        </ol>
        </section>
    </main>

    <footer>
        <p>© 2025 小學生筆記</p>
    </footer>
</body>
</html>